{
  "id": "dragons_lair",
  "name": "The Dragon's Lair",
  "startNodeId": "forest_edge",
  "attributes": [
    { "id": "health", "name": "Health", "icon": "❤️", "value": 100, "max": 100, "type": "pool" },
    { "id": "mana", "name": "Mana", "icon": "✨", "value": 20, "max": 20, "type": "pool" },
    { "id": "gold", "name": "Gold", "icon": "💰", "value": 10, "type": "pool" },
    { "id": "strength", "name": "Strength", "icon": "💪", "value": 5, "type": "stat" },
    { "id": "wisdom", "name": "Wisdom", "icon": "🧠", "value": 5, "type": "stat" }
  ],
  "inventory": [
    { "id": "flint_and_steel", "name": "Flint and Steel", "quantity": 1 }
  ],
  "nodes": {
    "forest_edge": {
      "id": "forest_edge",
      "title": "Forest Edge",
      "color": "#4CAF50",
      "text": "You find yourself at the edge of a dense, ancient forest. A faint path leads deeper into the trees, while a rocky trail winds along the perimeter. The air is cool and smells of damp earth and pine.",
      "choices": [
        { "text": "Follow the faint path into the deep forest.", "targetNodeId": "deep_forest" },
        { "text": "Take the rocky trail along the forest edge.", "targetNodeId": "forest_path" },
        {
          "text": "Look for anything interesting nearby.",
          "targetNodeId": "forest_edge",
          "effects": [
            {
              "type": "node",
              "action": "addChoice",
              "value": {
                "text": "Find a patch of wild berries. (+5 Health)",
                "targetNodeId": "forest_edge",
                "effects": [
                  { "type": "attribute", "id": "health", "operator": "+", "value": 5 },
                  { "type": "node", "action": "removeChoice" }
                ]
              }
            },
            { "type": "node", "action": "removeChoice" }
          ]
        }
      ]
    },
    "deep_forest": {
      "id": "deep_forest",
      "title": "Deep Forest",
      "color": "#2E7D32",
      "text": "The trees here are ancient and tall, their canopy blocking most of the sunlight. The air is damp and still, and you hear the rustling of unseen creatures. It feels easy to get lost here.",
      "choices": [
        { "text": "Try to find your way back to the forest edge.", "targetNodeId": "forest_edge" },
        { "text": "Push deeper into the dense undergrowth.", "targetNodeId": "hidden_glade" },
        { "text": "Look for signs of a more defined path.", "targetNodeId": "forest_path" }
      ]
    },
    "forest_path": {
      "id": "forest_path",
      "title": "Forest Path",
      "color": "#6D4C41",
      "text": "The rocky trail eventually widens into a more defined path, though still overgrown in places. You notice strange, weathered carvings on some of the older trees, all pointing towards a prominent, dark rock formation in the distance.",
      "choices": [
        { "text": "Follow the path towards the rock formation.", "targetNodeId": "cave_entrance" },
        { "text": "Venture off the path into the deeper forest.", "targetNodeId": "deep_forest" },
        { "text": "Go back towards the forest edge.", "targetNodeId": "forest_edge" }
      ]
    },
    "cave_entrance": {
      "id": "cave_entrance",
      "title": "The Cave Entrance",
      "color": "#5a8a4a",
      "text": "You stand at the mouth of a dark cave, rumored to hold an ancient dragon and its treasure. A chilling wind blows from within. To the side, a treacherous-looking path leads up the mountain. The area near the entrance looks like it might be worth a quick search. The forest path is behind you.",
      "choices": [
        { "text": "Bravely enter the cave.", "targetNodeId": "cave_darkness"},
        { "text": "Try the mountain path.", "targetNodeId": "mountain_path" },
        {
          "text": "Search the area.",
          "targetNodeId": "cave_entrance",
          "effects": [
            {
              "type": "node",
              "action": "addChoice",
              "value": {
                "text": "Pick up the discarded torch.",
                "targetNodeId": "cave_entrance",
                "effects": [
                  { "type": "item", "action": "add", "id": "torch", "quantity": 1 },
                  { "type": "node", "action": "removeChoice" }
                ]
              }
            },
            { "type": "node", "action": "removeChoice" }
          ]
        },
        {
          "text": "Pick up the rusty sword.",
          "targetNodeId": "cave_entrance",
          "effects": [
            { "type": "item", "action": "add", "id": "rusty_sword", "quantity": 1 },
            { "type": "attribute", "id": "strength", "operator": "+", "value": 5 },
            { "type": "node", "action": "removeChoice" }
          ]},
        { "text": "Go back to the forest path.", "targetNodeId": "forest_path" }
      ]
    },
    "hidden_glade": {
      "id": "hidden_glade",
      "title": "Hidden Glade",
      "color": "#8BC34A",
      "text": "You stumble upon a small, sun-dappled glade. A clear spring bubbles up from the ground, and strange, glowing blue mushrooms grow at its edge. The air here feels peaceful.",
      "choices": [
        {
          "text": "Drink from the clear spring. (+10 Health)",
          "targetNodeId": "hidden_glade",
          "effects": [
            { "type": "attribute", "id": "health", "operator": "+", "value": 10 },
            { "type": "node", "action": "removeChoice" }
          ]
        },
        {
          "text": "Examine the glowing mushrooms. (+1 Wisdom)",
          "targetNodeId": "hidden_glade",
          "effects": [
            { "type": "attribute", "id": "wisdom", "operator": "+", "value": 1 },
            { "type": "node", "action": "removeChoice" }
          ]
        }
      ]
    },
    "cave_darkness": {
      "id": "cave_darkness",
      "title": "Into the Dark",
      "color": "#333333",
      "text": "The cave is pitch black. You can hear the faint sound of dripping water and something... large... breathing in the distance.",
      "choices": [
        {
          "text": "Light the torch.",
          "targetNodeId": "torch_lit",
          "requirements": [
            { "type": "item", "id": "torch", "quantity": 1, "hideOnFail": true },
            { "type": "item", "id": "flint_and_steel", "quantity": 1 }
          ],
          "effects": [{ "type": "item", "action": "remove", "id": "torch", "quantity": 1 }] },
        { "text": "Proceed in the darkness.", "targetNodeId": "dark_pit" },
        { "text": "Retreat back to the cave entrance.", "targetNodeId": "cave_entrance" }
      ]
    },
    "mountain_path": {
      "id": "mountain_path",
      "title": "A Treacherous Climb",
      "color": "#8B4513",
      "text": "You begin to climb the steep mountain path. The rocks are loose under your feet. You slip!",
      "choices": [
        {
          "text": "Grab for a nearby thorny vine.", "targetNodeId": "vine_grab",
          "effects": [{ "type": "attribute", "id": "health", "operator": "-", "value": 5 }]
        },
        { "text": "Try to roll into the fall.", "targetNodeId": "tumble_fail" },
        { "text": "This looks too dangerous. Go back.", "targetNodeId": "cave_entrance" }
      ]
    },
    "torch_lit": {
      "id": "torch_lit",
      "title": "The Dragon's Hoard",
      "color": "#EFB82A",
      "text": "The torchlight illuminates a vast cavern filled with glittering piles of gold and jewels. In the center of the hoard, a massive red dragon sleeps.",
      "choices": [
        { "text": "Attempt to sneak past the dragon.", "targetNodeId": "sneak_success" },
        { "text": "Grab a handful of gold and run.", "targetNodeId": "dragon_wakes", "effects": [{ "type": "item", "action": "add", "id": "gold", "quantity": 50 }] },
        {
          "text": "Try to pry open a heavy, iron-bound chest.",
          "targetNodeId": "chest_opened",
          "requirements": [
            { "type": "attribute", "id": "strength", "operator": ">=", "value": 10 }
          ]
        },
        { "text": "This is too risky. Retreat from the cavern.", "targetNodeId": "cave_darkness" }
      ]
    },
    "dark_pit": { "id": "dark_pit", "title": "The Pit", "color": "#000000", "text": "Creeping forward in the dark, your foot finds only empty air. You tumble into a deep pit. Your adventure ends here.", "choices": [] },
    "vine_grab": { "id": "vine_grab", "title": "A Thorny Success", "color": "#208060", "text": "Your hands are scratched, but the vine holds! You pull yourself onto a hidden ledge that reveals a secret, well-lit entrance into the side of the cavern. You can see the dragon's hoard from here.", "choices": [{ "text": "Enter the secret passage.", "targetNodeId": "torch_lit" }, { "text": "Go back to the mountain path.", "targetNodeId": "mountain_path" }] },
    "tumble_fail": { "id": "tumble_fail", "title": "A Nasty Fall", "color": "#6c757d", "text": "You tumble down the rocky slope, injuring your leg. You are in no condition to continue. Your adventure ends here.", "choices": [] },
    "sneak_success": { "id": "sneak_success", "title": "Freedom!", "color": "#28a745", "text": "You hold your breath and creep silently around the edge of the cavern. You find a passage on the other side and emerge into the sunlight, victorious!", "choices": [] },
    "dragon_wakes": { "id": "dragon_wakes", "title": "A Grave Mistake", "color": "#CC3333", "text": "The clinking of coins echoes in the cavern. A massive golden eye snaps open. The dragon is awake, and it is not happy. Your adventure ends here, in a cloud of fire.", "choices": [] },
    "chest_opened": { "id": "chest_opened", "title": "A Fortunate Find", "color": "#00A0C0", "text": "With a mighty heave, the chest creaks open! Inside, you find a magical amulet.", "effects": [{ "type": "item", "action": "add", "id": "amulet_of_wisdom", "quantity": 1 }], "choices": [{ "text": "Take the amulet and continue.", "targetNodeId": "sneak_success" }, { "text": "Leave the chest and return to the main hoard.", "targetNodeId": "torch_lit" }] },
    "GAME_OVER": { "id": "GAME_OVER", "title": "You Have Died", "color": "#000000", "text": "Your adventure has come to a premature end.", "choices": [] }
  },
  "_ui": {
    "pan": { "x": 0, "y": 0 },
    "zoom": 1
  }
}