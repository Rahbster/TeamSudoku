/*==============================General & Layout==============================*/
body {
    font-family: sans-serif;
    color: #333;
    margin: 0;
    padding: 20px;
    background-color: white; /* Set a default color that is visible in the background */
}

#background-image-container {
    position: fixed;
    opacity: .25;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1; /* This places the div behind all other content */
    transition: opacity 0.5s ease-in-out; /* Add a smooth transition */
    background-image: url('../assets/ActiveSudoku.png');
    background-repeat: no-repeat;
    background-position: center center;
    background-size: cover; /* This makes the image cover the entire container */
}

/* This rule applies when the connection UI is visible */
body.connection-background #background-image-container {
    background-image: url('../assets/StageConnection.png');
    opacity: 0.25;
}

.container {
    display: flex;
    gap: 20px;
}

.column {
    flex: 1;
    padding: 10px;
    border: 1px solid #ccc;
}

.header-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.hidden {
    display: none;
}

#scan-overlay-message.hidden {
    opacity: 0;
    pointer-events: none; /* Prevents clicks on the hidden element */
}

/*==============================Sudoku Grid==============================*/
#sudoku-grid {
    display: grid;
    grid-template-columns: repeat(9, 36px);
    width: 324px;
    border: 3px solid black;
    margin: 0 auto;
}

.grid-cell {
    width: 36px;
    height: 36px;
    border: 1px solid black;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 20px;
    cursor: pointer;
    box-sizing: border-box;
    transition: background-color 0.3s;
    background-color: rgba(255, 255, 255, .75);
}

.subgrid-border-right {
    border-right: 3px solid black;
}

.subgrid-border-bottom {
    border-bottom: 3px solid black;
}

.preloaded-cell {
    background-color: #d0d0d0;
    cursor: default;
}

/*==============================Cell Coloring & States==============================*/
.highlight-cell {
    background-color: black;
    color: #f0f0f0;
}

.active-cell {
    background-color: #007bff;
}

.invalid-cell {
    background-color: lightcoral;
}

.solved-puzzle {
    background-color: lightgreen;
}

/*==============================Buttons and Form Elements==============================*/
button, select {
    background-color: #007bff;
    color: #fff;
    border: 2px solid #0056b3;
    padding: 10px 20px;
    font-size: 16px;
    font-weight: bold;
    text-transform: uppercase;
    cursor: pointer;
    border-radius: 5px;
    transition: all 0.3s ease;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

button:hover, select:hover {
    background-color: #0056b3;
    border-color: #004494;
    transform: translateY(-2px);
    box-shadow: 0 6px 8px rgba(0, 0, 0, 0.2);
}

button:active, select:active {
    transform: translateY(0);
    box-shadow: 2px 4px rgba(0, 0, 0, 0.1);
}

button:disabled, select:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    box-shadow: none;
}

select {
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    min-width: 200px;
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="%23ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>');
    background-repeat: no-repeat;
    background-position: right 10px center;
}

textarea {
    width: 100%;
    height: 100px;
}

@keyframes blink-animation {
    0% {
        background-color: transparent;
    }

    50% {
        background-color: #add8e6;
    }
    /* A light blue, for example */
    100% {
        background-color: transparent;
    }
}

.blink {
    animation: blink-animation 1s steps(1) infinite;
}

#scan-overlay-message {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: rgba(0, 0, 0, 0.7);
    color: white;
    font-size: 2em;
    font-weight: bold;
    padding: 20px 40px;
    border-radius: 10px;
    z-index: 1000;
    transition: opacity 0.3s ease-in-out;
    opacity: 1; /* Initially visible */
}

#timer-area {
    /* Adds padding and a background for readability */
    padding: 0px 50px;
    background-color: rgba(0, 0, 0, 0.7);
    color: white;
    font-size: 1.2em;
    border-radius: 5px;
    z-index: 1000; /* Ensures it appears on top of other content */
    display: inline-block;
}

#p1-peer-id {
    background-color: rgba(0, 0, 0, 0.7);
    color: white;
    font-size: 2em;
    font-weight: bold;
    padding: 20px 40px;
    border-radius: 10px;
    z-index: 1000;
    transition: opacity 0.3s ease-in-out;
    opacity: 1; /* Initially visible */
    display: inline-block;
}

/*==============================QR Code==============================*/
#qr-signaling-area {
    text-align: center;
}

#qr-code-display, #qr-code-display-answer {
    padding: 10px;
    border: 1px solid #ccc;
    display: inline-block;
    margin-top: 10px;
}

/*==============================Banished Theme - Dominant Colors Revised (Image 2)==============================*/

/* Main body background, taking cues from the darker armor and shadows */
body.banished {
    background-color: #262125; /* Very dark desaturated plum/grey */
    color: #E0DEDF; /* Light, slightly warm grey for general text */
}

    /* Sudoku grid borders, using a rich, slightly muted red from the armor */
    body.banished #sudoku-grid {
        border-color: #8C2F2F; /* Deep, strong red */
    }

    /* Individual cell borders, a subtle dark grey for definition */
    body.banished .grid-cell {
        border-color: #4A4549;
    }

    /* Preloaded cells (initial puzzle numbers) - using a lighter, more weathered grey from the Brute's skin */
    body.banished .preloaded-cell {
        background-color: #6B686A; /* Mid-tone weathered grey */
        color: #262125; /* Dark text for excellent contrast */
    }

    /* Highlighted cells (e.g., when a number is selected) - a lighter, almost bone-like grey for distinction */
    body.banished .highlight-cell {
        background-color: #A3A0A2; /* Light, neutral grey */
        color: #262125; /* Dark text for high contrast */
    }

    /* Active cell (the one currently selected) - distinct and bold with the prominent red */
    body.banished .active-cell {
        background-color: #C22D2D; /* A brighter, more intense red, similar to the eyes */
        color: #FFFFFF; /* White text for maximum visibility */
    }

    /* Invalid cell (error indication) - needs to be clearly noticeable */
    body.banished .invalid-cell {
        background-color: #FF0000; /* Standard bright red for errors */
        color: #FFFFFF;
    }

    /* Solved puzzle - a final, satisfying state, perhaps a dark, tarnished bronze/gold */
    body.banished .solved-puzzle {
        background-color: #5C4B2E; /* Dark, tarnished bronze */
        color: #E0DEDF; /* Light text for clarity */
    }

/*==============================UNSC Theme - Dominant Colors Revised==============================*/

/* Main body background, reflecting the dark, somber tone of a UNSC ship or environment */
body.unsc {
    background-color: #1A1A1A; /* Dark military gray */
    color: #CDCFCC; /* A cool, off-white for text */
}

    /* Sudoku grid borders, using Master Chief's primary armor color */
    body.unsc #sudoku-grid {
        border-color: #2D6A4F; /* Military olive green */
    }

    /* Individual cell borders, a darker shade for subtle definition */
    body.unsc .grid-cell {
        border-color: #1D3A2F;
    }

    /* Preloaded cells (initial puzzle numbers) - a worn, metallic color from the armor */
    body.unsc .preloaded-cell {
        background-color: #4C4A45; /* A dark, worn metallic gray */
        color: #CDCFCC; /* Light text for good contrast */
    }

    /* Highlighted cells - using the bright, high-tech orange from the visor */
    body.unsc .highlight-cell {
        background-color: #EFB82A; /* Visor gold/yellow */
        color: #1D3A2F; /* Dark text for high contrast */
    }

    /* Active cell - a brighter version of the armor's green */
    body.unsc .active-cell {
        background-color: #3D6B51; /* A more vibrant military green */
        color: #CDCFCC;
    }

    /* Invalid cell (error) - a muted red, fitting the military aesthetic */
    body.unsc .invalid-cell {
        background-color: #B53835;
    }

    /* Solved puzzle - the ethereal, calming blue of the AI hologram */
    body.unsc .solved-puzzle {
        background-color: #00A0C0; /* The cyan glow of the AI */
        color: #1A1A1A; /* Dark text for clarity */
    }

/*==============================Forerunner Theme - Dominant Colors Revised==============================*/

/* Dominate dark background, similar to the image's background */
body.forerunner {
    background-color: #1A2A3A; /* Deep dark blue-grey */
    color: #C0D0E0; /* Light desaturated blue for general text */
}

    /* Sudoku grid borders, using a prominent metallic blue-grey from the structures */
    body.forerunner #sudoku-grid {
        border-color: #4A6A8A; /* Medium metallic blue-grey */
    }

    /* Individual cell borders, a slightly darker shade for definition */
    body.forerunner .grid-cell {
        border-color: #3A5A7A; /* Darker metallic blue-grey */
    }

    /* Preloaded cells (initial puzzle numbers) - should stand out but blend thematically */
    body.forerunner .preloaded-cell {
        background-color: #2A4A6A; /* A darker, rich blue-grey */
        color: #F0F8FF; /* Near-white or very pale blue for excellent contrast */
    }

    /* Highlighted cells (e.g., when a number is selected) - uses a more vibrant metallic color */
    body.forerunner .highlight-cell {
        background-color: #6A8AA0; /* A lighter, more reflective metallic blue-grey */
        color: #1A2A3A; /* Use the body's dark background for text on highlight */
    }

    /* Active cell (the one currently selected by the player) - distinct and functional */
    body.forerunner .active-cell {
        background-color: #00A0C0; /* A vibrant teal/cyan, pulling from the subtle accents */
        color: #1A2A3A; /* Dark text for high contrast on the bright background */
    }

    /* Invalid cell (error indication) - needs to be clearly noticeable */
    body.forerunner .invalid-cell {
        background-color: #CC3333; /* A strong, clear red for errors */
        color: #F0F8FF; /* White text on red for high visibility */
    }

    /* Solved puzzle - a final, satisfying state */
    body.forerunner .solved-puzzle {
        background-color: #208060; /* A deep, sci-fi green for completion */
        color: #F0F8FF; /* White text for clarity */
    }

/*==============================Host ID Area============================*/
.host-id-container {
    display: flex;
    align-items: center; /* This aligns items vertically */
    gap: 10px; /* This adds space between the ID and the button */
}

#generate-new-id-btn {
    margin-top: 5px;
}

/*==============================Number Pad==============================*/
#number-pad {
    display: flex;
    justify-content: center;
    flex-wrap: nowrap;
    gap: 10px;
    margin-top: 20px;
}

.number-btn {
    width: 40px;
    height: 40px;
    border-radius: 5px;
    font-size: 1.2em;
    font-weight: bold;
    cursor: pointer;
    border: none;
    transition: transform 0.2s;
    background-color: #007bff;
    color: #fff;
    /* Properties to center the text */
    display: flex;
    justify-content: center;
    align-items: center;
}

/* ------------------------------------------ */
/* Media Query                                */
/* ------------------------------------------ */

/* This rule will only apply to screens with a min-max width of 0px - 390px. */
@media (max-width: 390px) {
    #number-pad {
        flex-wrap: wrap; /* Allows buttons to wrap to a new line on smaller screens */
        gap: 5px; /* Adjust the gap for a tighter fit */
        margin-top: 10px;
    }

    .number-btn {
        width: 19%; /* Use a percentage to make the buttons responsive */
        max-width: 60px; /* Limits the size of the button */
    }
}

.number-btn:hover {
    transform: scale(1.1);
}

/* Optional: Add theme-specific styles for the number pad */
body.banished .number-btn {
    background-color: #9C3908;
    color: #F0F0F0;
    border: 2px solid #BC3908;
}

body.unsc .number-btn {
    background-color: #4C4A45;
    color: #CDCFCC;
    border: 2px solid #2D6A4F;
}

body.forerunner .number-btn {
    background-color: #4D4D99;
    color: #E6E6FA;
    border: 2px solid #33CCFF;
}

#empty-btn {
    background-color: #dc3545; /* A red color to signify "clear" or "delete" */
}

#empty-btn:hover {
    background-color: #c82333;
}

body.banished .theme-button,
body.banished #signaling-method,
body.banished #player-role,
body.banished #theme-select,
body.banished #difficulty-select {
    background-color: #9C3908;
    color: #F0F0F0;
    border-color: #BC3908;
}

body.unsc .theme-button,
body.unsc #signaling-method,
body.unsc #player-role,
body.unsc #theme-select,
body.unsc #difficulty-select {
    background-color: #4C4A45;
    color: #CDCFCC;
    border-color: #2D6A4F;
}

body.forerunner .theme-button,
body.forerunner #signaling-method,
body.forerunner #player-role,
body.forerunner #theme-select,
body.forerunner #difficulty-select {
    background-color: #4D4D99;
    color: #E6E6FA;
    border-color: #33CCFF;
}